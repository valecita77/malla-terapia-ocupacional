<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Terapia Ocupacional UC</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      transition: background-color 0.3s ease;
    }
    header {
      padding: 1rem;
      text-align: center;
      background-color: #a8dadc;
      color: #1d3557;
    }
    select {
      margin: 1rem auto;
      display: block;
      padding: 0.5rem;
      font-size: 1rem;
    }
    .malla {
      display: flex;
      flex-direction: column;
      gap: 2rem;
      padding: 1rem;
    }
    .semestre {
      display: flex;
      flex-direction: row;
      gap: 1rem;
      align-items: center;
    }
    .semestre h3 {
      width: 150px;
      margin: 0;
      flex-shrink: 0;
    }
    .ramo {
      padding: 0.5rem 1rem;
      background-color: #bde0fe;
      color: #1d3557;
      border-radius: 8px;
      cursor: pointer;
      user-select: none;
      opacity: 0.6;
      transition: all 0.3s ease;
    }
    .ramo.enabled {
      opacity: 1;
    }
    .ramo.completed {
      background-color: #69a6d0 !important;
      text-decoration: line-through;
    }
  </style>
</head>
<body>
  <header>
    <h1>Terapia Ocupacional UC</h1>
    <label for="color-selector">Selecciona un color pastel:</label>
    <select id="color-selector">
      <option value="azul">Azul pastel</option>
      <option value="rosa">Rosa pastel</option>
      <option value="verde">Verde pastel</option>
      <option value="amarillo">Amarillo pastel</option>
      <option value="lila">Lila pastel</option>
    </select>
  </header>

  <section class="malla" id="malla">
    <!-- SEMESTRE I -->
    <div class="semestre">
      <h3>Semestre I</h3>
      <div class="ramo enabled" data-id="MAT1000">Precálculo (MAT1000)</div>
      <div class="ramo enabled" data-id="BIO141C">Biología de la Célula (BIO141C)</div>
      <div class="ramo enabled" data-id="TOC110C">Introducción a la Terapia Ocupacional (TOC110C)</div>
    </div>
    <!-- SEMESTRE II -->
    <div class="semestre">
      <h3>Semestre II</h3>
      <div class="ramo" data-id="QUI150C" data-prerreq="BIO141C">Química General (QUI150C)</div>
      <div class="ramo" data-id="BIO142C" data-prerreq="BIO141C">Biología del Desarrollo (BIO142C)</div>
      <div class="ramo" data-id="TOC120C" data-prerreq="TOC110C">Bases de la Ocupación Humana (TOC120C)</div>
      <div class="ramo" data-id="TOC121C" data-prerreq="TOC110C">Desarrollo Humano y Ocupación (TOC121C)</div>
    </div>
    <!-- SEMESTRE III -->
    <div class="semestre">
      <h3>Semestre III</h3>
      <div class="ramo" data-id="TOC131C" data-prerreq="BIO142C">Intervención en Niños (TOC131C)</div>
      <div class="ramo" data-id="TOC132C" data-prerreq="TOC121C">Intervención en Adultos (TOC132C)</div>
      <div class="ramo" data-id="TOC133C" data-prerreq="QUI150C">Bases Neurológicas (TOC133C)</div>
      <div class="ramo" data-id="TOC134C" data-prerreq="TOC120C">Evaluación y Diagnóstico (TOC134C)</div>
    </div>
    <!-- SEMESTRE IV -->
    <div class="semestre">
      <h3>Semestre IV</h3>
      <div class="ramo" data-id="TOC141C" data-prerreq="TOC131C">Intervención en Salud Mental (TOC141C)</div>
      <div class="ramo" data-id="TOC142C" data-prerreq="TOC132C">Evaluación en Niños (TOC142C)</div>
      <div class="ramo" data-id="TOC143C" data-prerreq="TOC133C">Intervención en Discapacidad Física (TOC143C)</div>
      <div class="ramo" data-id="TOC144C" data-prerreq="TOC134C">Contextos Institucionales (TOC144C)</div>
    </div>
    <!-- SEMESTRE V -->
    <div class="semestre">
      <h3>Semestre V</h3>
      <div class="ramo" data-id="TOC151C" data-prerreq="TOC144C">Intervención en Salud Mental (TOC151C)</div>
      <div class="ramo" data-id="TOC152C" data-prerreq="TOC143C">Desempeño Ocupacional en Niños (TOC152C)</div>
      <div class="ramo" data-id="TOC153C" data-prerreq="TOC142C">Evaluación en Discapacidad Física (TOC153C)</div>
      <div class="ramo" data-id="TOC154C" data-prerreq="TOC132C">Contextos Institucionales y Comunitarios (TOC154C)</div>
    </div>
    <!-- SEMESTRE VI -->
    <div class="semestre">
      <h3>Semestre VI</h3>
      <div class="ramo" data-id="TOC161C" data-prerreq="TOC151C">Rehabilitación Psicosocial (TOC161C)</div>
      <div class="ramo" data-id="TOC162C" data-prerreq="TOC152C">Intervención con Niños y Adolescentes (TOC162C)</div>
      <div class="ramo" data-id="TOC163C" data-prerreq="TOC153C">Intervención en Discapacidad Física (TOC163C)</div>
      <div class="ramo" data-id="TOC164C" data-prerreq="TOC154C">Promoción de la Participación Ocupacional (TOC164C)</div>
    </div>
    <!-- SEMESTRE VII -->
    <div class="semestre">
      <h3>Semestre VII</h3>
      <div class="ramo" data-id="TOC171C" data-prerreq="TOC161C">Práctica en Salud Mental (TOC171C)</div>
      <div class="ramo" data-id="TOC172C" data-prerreq="TOC162C">Práctica con Niños y Adolescentes (TOC172C)</div>
      <div class="ramo" data-id="TOC173C" data-prerreq="TOC163C">Práctica en Discapacidad Física (TOC173C)</div>
      <div class="ramo" data-id="TOC174C" data-prerreq="TOC164C">Práctica en Comunidad (TOC174C)</div>
    </div>
    <!-- SEMESTRE VIII -->
    <div class="semestre">
      <h3>Semestre VIII</h3>
      <div class="ramo" data-id="TOC181C">Seminario de Investigación I (TOC181C)</div>
      <div class="ramo" data-id="TOC182C">Ética Profesional (TOC182C)</div>
      <div class="ramo" data-id="TOC183C">Taller de Integración I (TOC183C)</div>
      <div class="ramo" data-id="TOC184C">Electivo Profesional I (TOC184C)</div>
    </div>
    <!-- SEMESTRE IX -->
    <div class="semestre">
      <h3>Semestre IX</h3>
      <div class="ramo" data-id="TOC191C">Seminario de Investigación II (TOC191C)</div>
      <div class="ramo" data-id="TOC192C">Gestión y Liderazgo (TOC192C)</div>
      <div class="ramo" data-id="TOC193C">Taller de Integración II (TOC193C)</div>
      <div class="ramo" data-id="TOC194C">Electivo Profesional II (TOC194C)</div>
    </div>
    <!-- SEMESTRE X -->
    <div class="semestre">
      <h3>Semestre X</h3>
      <div class="ramo" data-id="TOC195C">Internado Profesional I (TOC195C)</div>
      <div class="ramo" data-id="TOC196C">Internado Profesional II (TOC196C)</div>
      <div class="ramo" data-id="TOC197C">Taller de Titulación (TOC197C)</div>
    </div>
  </section>

  <script>
    const colores = {
      azul: { fondo: "#e0f7fa", malla: "#b2ebf2", texto: "#006064", completado: "#4dd0e1" },
      rosa: { fondo: "#fce4ec", malla: "#f8bbd0", texto: "#880e4f", completado: "#f48fb1" },
      verde: { fondo: "#e8f5e9", malla: "#a5d6a7", texto: "#1b5e20", completado: "#66bb6a" },
      amarillo: { fondo: "#fffde7", malla: "#fff176", texto: "#f57f17", completado: "#ffd54f" },
      lila: { fondo: "#f3e5f5", malla: "#ce93d8", texto: "#4a148c", completado: "#ba68c8" }
    };

    const selector = document.getElementById("color-selector");
    const ramos = document.querySelectorAll(".ramo");

    function aplicarColor(color) {
      const c = colores[color];
      document.body.style.backgroundColor = c.fondo;
      ramos.forEach(r => {
        if (!r.classList.contains("completed")) {
          r.style.backgroundColor = c.malla;
          r.style.color = c.texto;
        }
      });
    }

    function actualizarHabilitados() {
      const completados = new Set([...document.querySelectorAll(".ramo.completed")].map(el => el.dataset.id));
      ramos.forEach(ramo => {
        const req = ramo.dataset.prerreq;
        if (!req || completados.has(req)) {
          ramo.classList.add("enabled");
          ramo.classList.remove("disabled");
        } else {
          ramo.classList.remove("enabled");
          ramo.classList.add("disabled");
        }
      });
    }

    ramos.forEach(ramo => {
      // Inicialmente habilitar solo los que no tienen prerrequisitos
      if (!ramo.dataset.prerreq) {
        ramo.classList.add("enabled");
      } else {
        ramo.classList.remove("enabled");
        ramo.classList.add("disabled");
      }

      ramo.addEventListener("click", () => {
        if (!ramo.classList.contains("enabled")) return;
        ramo.classList.toggle("completed");
        if (ramo.classList.contains("completed")) {
          ramo.style.backgroundColor = colores[selector.value].completado;
          ramo.style.color = "white";
        } else {
          ramo.style.backgroundColor = colores[selector.value].malla;
          ramo.style.color = colores[selector.value].texto;
        }
        actualizarHabilitados();
      });
    });

    selector.addEventListener("change", () => {
      aplicarColor(selector.value);
      // Reaplicar colores a ramos completados
      ramos.forEach(ramo => {
        if (ramo.classList.contains("completed")) {
          ramo.style.backgroundColor = colores[selector.value].completado;
          ramo.style.color = "white";
        } else {
          ramo.style.backgroundColor = colores[selector.value].malla;
          ramo.style.color = colores[selector.value].texto;
        }
      });
    });

    window.onload = () => {
      aplicarColor(selector.value);
      actualizarHabilitados();
    };
  </script>
</body>
</html>
